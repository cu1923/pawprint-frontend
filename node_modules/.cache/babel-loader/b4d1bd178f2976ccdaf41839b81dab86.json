{"ast":null,"code":"import _slicedToArray from\"/Users/siyuchen/Documents/GitHub/frontend/pawprint-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import\"../css/Post.css\";import username_logo from\"../images/social/username_logo.png\";import comment_symbol from\"../images/social/comment_symbol.png\";import nolikes from\"../images/social/powell_cat_nolikes.png\";import like from\"../images/social/powell_cat_likes.png\";import Axios from'axios';import{Image}from\"cloudinary-react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Icon(props){return/*#__PURE__*/_jsx(\"img\",{className:\"icon\",src:props.symbol,alt:props.altName});}function Post(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),uploads=_useState2[0],setUploads=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),likes=_useState4[0],setLikes=_useState4[1];var user=localStorage.getItem(\"username\");useEffect(function(){if(!localStorage.getItem(\"loggedIn\")){localStorage.setItem(\"loggedIn\",false);}},[]);useEffect(function(){Axios.get(\"http://localhost:8000/social\").then(function(response){setUploads(response.data);});},[]);useEffect(function(){Axios.get(\"http://localhost:8000/liked\",{params:{user:user}}).then(function(response){setLikes(response.data);});},[user]);var likePost=function likePost(id,key){if(localStorage.getItem(\"loggedIn\")===\"false\"){alert(\"please log in to like!\");}else if(likes.includes(id)){Axios.post(\"http://localhost:8000/unlike\",{user_id:user,post_id:id}).then(function(response){alert(\"you have unliked this post\");});}else{var tempLikes=uploads;tempLikes[key].likes=tempLikes[key].likes+1;Axios.post(\"http://localhost:8000/like\",{user_id:localStorage.getItem(\"username\"),post_id:id}).then(function(response){setUploads(tempLikes);alert(\"you have liked this post\");});}};return/*#__PURE__*/_jsx(\"div\",{children:uploads.map(function(val,key){return/*#__PURE__*/_jsxs(\"div\",{className:\"user_post\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"username_header\",children:/*#__PURE__*/_jsx(\"strong\",{children:val.user_id})}),/*#__PURE__*/_jsx(\"div\",{className:\"post_image\",children:/*#__PURE__*/_jsx(Image,{cloudName:\"bruin-pawprint\",publicId:val.image})}),/*#__PURE__*/_jsxs(\"div\",{className:\"icons\",onClick:function onClick(){likePost(val.id,key);},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user_caption\",children:[\" \",\"Description:     \",val.title]}),/*#__PURE__*/_jsxs(\"div\",{className:\"likes\",children:[!likes.includes(val.id)?/*#__PURE__*/_jsx(Icon,{symbol:nolikes,altName:\"nolikes icon\"}):/*#__PURE__*/_jsx(Icon,{symbol:like,altName:\"likes icon\"}),val.num_like,\" likes \"]})]})]});})});}export default Post;","map":{"version":3,"sources":["/Users/siyuchen/Documents/GitHub/frontend/pawprint-frontend/src/components/Post.jsx"],"names":["React","useEffect","useState","username_logo","comment_symbol","nolikes","like","Axios","Image","Icon","props","symbol","altName","Post","uploads","setUploads","likes","setLikes","user","localStorage","getItem","setItem","get","then","response","data","params","likePost","id","key","alert","includes","post","user_id","post_id","tempLikes","map","val","image","title","num_like"],"mappings":"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","sourcesContent":["import React, {useEffect, useState } from \"react\";\nimport \"../css/Post.css\";\nimport username_logo from \"../images/social/username_logo.png\";\nimport comment_symbol from \"../images/social/comment_symbol.png\";\nimport nolikes from \"../images/social/powell_cat_nolikes.png\";\nimport like from \"../images/social/powell_cat_likes.png\";\nimport Axios from 'axios';\nimport { Image } from \"cloudinary-react\";\n\nfunction Icon(props) {\n  return <img className=\"icon\" src={props.symbol} alt={props.altName} />;\n}\n\nfunction Post() {\n  const [uploads, setUploads] = useState([]);\n  const [likes, setLikes] = useState([]);\n  const user = localStorage.getItem(\"username\");\n\n  useEffect(() => {\n    if (!localStorage.getItem(\"loggedIn\")) {\n      localStorage.setItem(\"loggedIn\", false);\n    }\n  }, []);\n\n  useEffect(() => {\n    Axios.get(\"http://localhost:8000/social\").then((response) => {\n      setUploads(response.data);\n    });\n  }, []);\n\n  useEffect(() => {\n    Axios.get(\"http://localhost:8000/liked\", {\n      params: {\n        user : user,\n      }\n    }).then((response) => {\n        setLikes(response.data);\n    });\n  }, [user]);\n\n  const likePost = (id, key) => {\n    if (localStorage.getItem(\"loggedIn\") === \"false\"){\n      alert(\"please log in to like!\")\n    }\n    else if (likes.includes(id)){\n      Axios.post(\"http://localhost:8000/unlike\", {\n        user_id: user,\n        post_id: id,\n      }).then((response) => {\n        alert(\"you have unliked this post\")\n      });\n    }\n    else{\n      var tempLikes = uploads;\n      tempLikes[key].likes = tempLikes[key].likes + 1;\n      Axios.post(\"http://localhost:8000/like\", {\n        user_id: localStorage.getItem(\"username\"),\n        post_id: id,\n      }).then((response) => {\n        setUploads(tempLikes);\n        alert(\"you have liked this post\")\n      });\n    }\n    \n  };\n\n  return (\n    <div>\n      {uploads.map((val, key) => {\n        return (\n          <div className=\"user_post\">\n            <div className=\"username_header\">\n              <strong>{val.user_id}</strong>\n            </div>\n            <div className=\"post_image\">\n              <Image cloudName=\"bruin-pawprint\" publicId={val.image} />\n            </div>\n            <div className=\"icons\"\n                onClick={() => {\n                  likePost(val.id, key);\n                }}>\n                <div className=\"user_caption\">\n                {\" \"}\n                {\"Description:     \"}{val.title}\n              </div>\n              <div className=\"likes\"> \n              { !likes.includes(val.id) ? (\n                <Icon symbol={nolikes} altName=\"nolikes icon\" />\n              ) : (\n                <Icon symbol = {like} altName = \"likes icon\"/>\n              )}\n              {val.num_like} likes </div>\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  );\n}\nexport default Post;\n"]},"metadata":{},"sourceType":"module"}