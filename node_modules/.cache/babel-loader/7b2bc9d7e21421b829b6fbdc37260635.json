{"ast":null,"code":"import _slicedToArray from\"/Users/siyuchen/Documents/GitHub/pawprint/pawprint/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/siyuchen/Documents/GitHub/pawprint/pawprint/client/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject;import React,{useEffect,useState}from\"react\";import\"../css/Post.css\";import username_logo from\"../images/social/profile_img.jpg\";import nolikes from\"../images/social/powell_cat_nolikes.png\";import like from\"../images/social/powell_cat_likes.png\";import Axios from'axios';import styled from\"styled-components\";import{Image}from\"cloudinary-react\";import{Button}from\"./Button\";import{IoIosAdd}from\"react-icons/io\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PlusIcon=styled(IoIosAdd)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  font-size: 1.2rem;\\n\"])));function Post(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),uploads=_useState2[0],setUploads=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),likes=_useState4[0],setLikes=_useState4[1];var user=localStorage.getItem(\"username\");useEffect(function(){if(!localStorage.getItem(\"loggedIn\")){localStorage.setItem(\"loggedIn\",false);}},[]);useEffect(function(){Axios.get(\"https://bruin-pawprint.herokuapp.com/social\").then(function(response){setUploads(response.data);});},[]);useEffect(function(){Axios.get(\"https://bruin-pawprint.herokuapp.com/liked\",{params:{user:user}}).then(function(response){setLikes(response.data);});},[user]);var likePost=function likePost(id,key){if(localStorage.getItem(\"loggedIn\")===\"false\"){alert(\"please log in to like!\");}else if(likes.includes(id)){var dislikes=uploads;dislikes[key].num_like=dislikes[key].num_like-1;Axios.post(\"https://bruin-pawprint.herokuapp.com/unlike\",{user_id:user,post_id:id}).then(function(response){setUploads(dislikes);setLikes(response.data);console.log(response.data);console.log(\"you have unliked this post\");});}else{var tempLikes=uploads;tempLikes[key].num_like=tempLikes[key].num_like+1;Axios.post(\"https://bruin-pawprint.herokuapp.com/like\",{user_id:localStorage.getItem(\"username\"),post_id:id}).then(function(response){setUploads(tempLikes);setLikes(response.data);console.log(\"you have liked this post\");});}};return/*#__PURE__*/_jsxs(\"div\",{class:\"postContainer\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"postButtons\",children:[/*#__PURE__*/_jsxs(Button,{primary:\"true\",href:\"/create\",children:[\"New Post\",/*#__PURE__*/_jsx(PlusIcon,{})]}),/*#__PURE__*/_jsx(Button,{primary:\"true\",href:\"/trending\",children:\"Sort by Trending\"}),/*#__PURE__*/_jsx(Button,{primary:\"true\",href:\"/search\",children:\"Search by User\"})]}),uploads.map(function(val,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"user_post\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"username_header\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"username_logo\",src:username_logo,alt:\"logo\"}),/*#__PURE__*/_jsx(\"strong\",{children:val.user_id})]}),/*#__PURE__*/_jsx(\"div\",{className:\"post_image\",children:/*#__PURE__*/_jsx(Image,{cloudName:\"bruin-pawprint\",publicId:val.image})}),/*#__PURE__*/_jsxs(\"div\",{className:\"icons\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"likes\",children:[likes.includes(val.id)?/*#__PURE__*/_jsx(\"img\",{className:\"icon\",src:like,alt:\"likes icon\",onClick:function onClick(){likePost(val.id,index);}}):/*#__PURE__*/_jsx(\"img\",{className:\"icon\",src:nolikes,alt:\"nolikes icon\",onClick:function onClick(){likePost(val.id,index);}}),\"\\xA0\",val.num_like,\" likes \"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"user_caption\",children:[\" \",/*#__PURE__*/_jsx(\"strong\",{children:val.user_id}),\" \",\" \",\" \",val.title]})]})]});})]});}export default Post;","map":{"version":3,"sources":["/Users/siyuchen/Documents/GitHub/pawprint/pawprint/client/src/components/Post.jsx"],"names":["React","useEffect","useState","username_logo","nolikes","like","Axios","styled","Image","Button","IoIosAdd","PlusIcon","Post","uploads","setUploads","likes","setLikes","user","localStorage","getItem","setItem","get","then","response","data","params","likePost","id","key","alert","includes","dislikes","num_like","post","user_id","post_id","console","log","tempLikes","map","val","index","image","title"],"mappings":"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","sourcesContent":["import React, {useEffect, useState } from \"react\";\nimport \"../css/Post.css\";\nimport username_logo from \"../images/social/profile_img.jpg\";\nimport nolikes from \"../images/social/powell_cat_nolikes.png\";\nimport like from \"../images/social/powell_cat_likes.png\";\nimport Axios from 'axios';\nimport styled from \"styled-components\";\nimport { Image } from \"cloudinary-react\";\nimport { Button } from \"./Button\";\nimport { IoIosAdd } from \"react-icons/io\";\n\nconst PlusIcon = styled(IoIosAdd)`\n  font-size: 1.2rem;\n`;\n\nfunction Post() {\n  const [uploads, setUploads] = useState([]);\n  const [likes, setLikes] = useState([]);\n  const user = localStorage.getItem(\"username\");\n\n  useEffect(() => {\n    if (!localStorage.getItem(\"loggedIn\")) {\n      localStorage.setItem(\"loggedIn\", false);\n    }\n  }, []);\n\n  useEffect(() => {\n    Axios.get(\"https://bruin-pawprint.herokuapp.com/social\").then((response) => {\n      setUploads(response.data);\n    });\n  }, []);\n\n  useEffect(() => {\n    Axios.get(\"https://bruin-pawprint.herokuapp.com/liked\", {\n      params: {\n        user : user,\n      }\n    }).then((response) => {\n        setLikes(response.data);\n    });\n  }, [user]);\n\n  const likePost = (id, key) => {\n    if (localStorage.getItem(\"loggedIn\") === \"false\"){\n      alert(\"please log in to like!\")\n    } else if (likes.includes(id)){\n      var dislikes = uploads;\n      dislikes[key].num_like = dislikes[key].num_like - 1;\n      Axios.post(\"https://bruin-pawprint.herokuapp.com/unlike\", {\n        user_id: user,\n        post_id: id,\n      }).then((response) => {\n        setUploads(dislikes);\n        setLikes(response.data);\n        console.log(response.data);\n        console.log(\"you have unliked this post\");\n      });\n    }\n    else{\n      var tempLikes = uploads;\n      tempLikes[key].num_like = tempLikes[key].num_like + 1;\n      Axios.post(\"https://bruin-pawprint.herokuapp.com/like\", {\n        user_id: localStorage.getItem(\"username\"),\n        post_id: id,\n      }).then((response) => {\n        setUploads(tempLikes);\n        setLikes(response.data)\n        console.log(\"you have liked this post\")\n      });\n    }\n    \n  };\n\n  return (\n    <div class=\"postContainer\">\n      <div class=\"postButtons\">\n        <Button primary=\"true\" href=\"/create\">\n          New Post\n          <PlusIcon />\n        </Button>\n        <Button primary=\"true\" href=\"/trending\">\n          Sort by Trending\n        </Button>\n        <Button primary=\"true\" href=\"/search\">\n          Search by User\n        </Button>\n      </div>\n      {uploads.map((val, index) => {\n        return (\n          <div className=\"user_post\">\n            <div className=\"username_header\">\n             <img\n                className=\"username_logo\"\n                src={username_logo}\n                alt=\"logo\"/>\n              <strong>{val.user_id}</strong>\n            </div>\n            <div className=\"post_image\">\n              <Image cloudName=\"bruin-pawprint\" publicId={val.image} />\n            </div>\n            <div className=\"icons\">\n              <div className=\"likes\">\n                { likes.includes(val.id) ? (\n                  <img className=\"icon\" src={like} alt={\"likes icon\"} onClick={() => {\n                    likePost(val.id, index);\n                  }}/>\n                ): (\n                  <img className=\"icon\" src={nolikes} alt={\"nolikes icon\"} onClick={() => {\n                    likePost(val.id, index);\n                  }}/>\n                  )}\n              &nbsp;{val.num_like} likes </div>\n              <div className=\"user_caption\">\n                {\" \"}\n                <strong>{val.user_id}</strong> {\" \"} {val.title}\n              </div>\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  );\n  \n}\n\nexport default Post;\n"]},"metadata":{},"sourceType":"module"}