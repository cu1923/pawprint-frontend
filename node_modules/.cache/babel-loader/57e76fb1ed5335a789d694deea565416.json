{"ast":null,"code":"import _slicedToArray from\"/Users/siyuchen/Documents/GitHub/pawprint/pawprint/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/siyuchen/Documents/GitHub/pawprint/pawprint/client/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject;import React,{useEffect,useState}from\"react\";import\"../css/Post.css\";import username_logo from\"../images/social/profile_img.jpg\";import nolikes from\"../images/social/powell_cat_nolikes.png\";import like from\"../images/social/powell_cat_likes.png\";import Axios from'axios';import styled from\"styled-components\";import{Image}from\"cloudinary-react\";import{Button}from\"./Button\";import{IoIosAdd}from\"react-icons/io\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PlusIcon=styled(IoIosAdd)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\"])));function Icon(props){return/*#__PURE__*/_jsx(\"img\",{className:\"icon\",src:props.symbol,alt:props.altName});}function Trending(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),trends=_useState2[0],setTrends=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),likes=_useState4[0],setLikes=_useState4[1];var user=localStorage.getItem(\"username\");useEffect(function(){Axios.get(\"https://bruin-pawprint.herokuapp.com/byTrending\").then(function(response){setTrends(response.data);});},[]);useEffect(function(){Axios.get(\"https://bruin-pawprint.herokuapp.com/liked\",{params:{user:user}}).then(function(response){setLikes(response.data);});},[user]);var likePost=function likePost(id,key){if(localStorage.getItem(\"loggedIn\")===\"false\"){alert(\"please log in to like!\");}else if(likes.includes(id)){var dislikes=trends;dislikes[key].num_like=dislikes[key].num_like-1;Axios.post(\"https://bruin-pawprint.herokuapp.com/unlike\",{user_id:user,post_id:id}).then(function(response){setTrends(dislikes);setLikes(response.data);console.log(response.data);console.log(\"you have unliked this post\");});}else{var tempLikes=trends;tempLikes[key].num_like=tempLikes[key].num_like+1;Axios.post(\"https://bruin-pawprint.herokuapp.com/like\",{user_id:localStorage.getItem(\"username\"),post_id:id}).then(function(response){setTrends(tempLikes);setLikes(response.data);console.log(\"you have liked this post\");});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"postContainer\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"postButtons\",children:[/*#__PURE__*/_jsxs(Button,{primary:\"true\",href:\"/create\",children:[\"New Post\",/*#__PURE__*/_jsx(PlusIcon,{})]}),/*#__PURE__*/_jsx(Button,{primary:\"true\",href:\"/post\",children:\"Sort Chronologically\"}),/*#__PURE__*/_jsx(Button,{primary:\"true\",href:\"/search\",children:\"Search by User\"})]}),trends.map(function(val,key){return/*#__PURE__*/_jsxs(\"div\",{className:\"user_post\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"username_header\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"username_logo\",src:username_logo,alt:\"logo\"}),/*#__PURE__*/_jsx(\"strong\",{children:val.user_id})]}),/*#__PURE__*/_jsx(\"div\",{className:\"post_image\",children:/*#__PURE__*/_jsx(Image,{cloudName:\"bruin-pawprint\",publicId:val.image})}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"likes\",children:[likes.includes(val.id)?/*#__PURE__*/_jsx(\"img\",{className:\"icon\",src:like,alt:\"likes icon\",onClick:function onClick(){likePost(val.id,key);}}):/*#__PURE__*/_jsx(\"img\",{className:\"icon\",src:nolikes,alt:\"nolikes icon\",onClick:function onClick(){likePost(val.id,key);}}),val.num_like,\" likes \"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"user_caption\",children:[\" \",/*#__PURE__*/_jsx(\"strong\",{children:val.user_id}),\" \",\" \",\" \",val.title]})]});})]});}export default Trending;","map":{"version":3,"sources":["/Users/siyuchen/Documents/GitHub/pawprint/pawprint/client/src/components/Trending.jsx"],"names":["React","useEffect","useState","username_logo","nolikes","like","Axios","styled","Image","Button","IoIosAdd","PlusIcon","Icon","props","symbol","altName","Trending","trends","setTrends","likes","setLikes","user","localStorage","getItem","get","then","response","data","params","likePost","id","key","alert","includes","dislikes","num_like","post","user_id","post_id","console","log","tempLikes","map","val","image","title"],"mappings":"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","sourcesContent":["import React, {useEffect, useState } from \"react\";\nimport \"../css/Post.css\";\nimport username_logo from \"../images/social/profile_img.jpg\";\nimport nolikes from \"../images/social/powell_cat_nolikes.png\";\nimport like from \"../images/social/powell_cat_likes.png\";\nimport Axios from 'axios';\nimport styled from \"styled-components\";\nimport { Image } from \"cloudinary-react\";\nimport { Button } from \"./Button\";\nimport { IoIosAdd } from \"react-icons/io\"\n\nconst PlusIcon = styled(IoIosAdd)``;\n\nfunction Icon(props) {\n    return <img className=\"icon\" src={props.symbol} alt={props.altName} />;\n  }\n  \n  function Trending() {\n    const [trends, setTrends] = useState([]);\n    const [likes, setLikes] = useState([]);\n    const user = localStorage.getItem(\"username\");\n  \n    useEffect(() => {\n      Axios.get(\"https://bruin-pawprint.herokuapp.com/byTrending\").then((response) => {\n          setTrends(response.data);\n      });\n    }, []);\n\n    useEffect(() => {\n      Axios.get(\"https://bruin-pawprint.herokuapp.com/liked\", {\n        params: {\n          user : user,\n        }\n      }).then((response) => {\n          setLikes(response.data);\n      });\n    }, [user]);\n\n    const likePost = (id, key) => {\n      if (localStorage.getItem(\"loggedIn\") === \"false\"){\n        alert(\"please log in to like!\")\n      } else if (likes.includes(id)){\n        var dislikes = trends;\n        dislikes[key].num_like = dislikes[key].num_like - 1;\n        Axios.post(\"https://bruin-pawprint.herokuapp.com/unlike\", {\n          user_id: user,\n          post_id: id,\n        }).then((response) => {\n          setTrends(dislikes);\n          setLikes(response.data);\n          console.log(response.data);\n          console.log(\"you have unliked this post\");\n        });\n      }\n      else{\n        var tempLikes = trends;\n        tempLikes[key].num_like = tempLikes[key].num_like + 1;\n        Axios.post(\"https://bruin-pawprint.herokuapp.com/like\", {\n          user_id: localStorage.getItem(\"username\"),\n          post_id: id,\n        }).then((response) => {\n          setTrends(tempLikes);\n          setLikes(response.data)\n          console.log(\"you have liked this post\")\n        });\n      }\n      \n    };\n  \n  \n    return (\n      <div className=\"postContainer\">\n        <div class=\"postButtons\">\n          <Button primary=\"true\" href=\"/create\">\n            New Post\n            <PlusIcon />\n          </Button>\n          <Button primary=\"true\" href=\"/post\">\n            Sort Chronologically\n          </Button>\n          <Button primary=\"true\" href=\"/search\">\n            Search by User\n          </Button>\n        </div>\n        {trends.map((val, key) => {\n          return (\n            <div className=\"user_post\">\n              <div className=\"username_header\">\n             <img\n                className=\"username_logo\"\n                src={username_logo}\n                alt=\"logo\"/>\n              <strong>{val.user_id}</strong>\n            </div>\n              <div className=\"post_image\">\n                <Image cloudName=\"bruin-pawprint\" publicId={val.image} />\n              </div>\n              <div>\n              </div>\n              <div className=\"likes\"> \n              { likes.includes(val.id) ? (\n                  <img className=\"icon\" src={like} alt={\"likes icon\"} onClick={() => {\n                    likePost(val.id, key);\n                  }}/>\n                ): (\n                  <img className=\"icon\" src={nolikes} alt={\"nolikes icon\"} onClick={() => {\n                    likePost(val.id, key);\n                  }}/>\n                  )}\n                {val.num_like} likes </div>\n                <div className=\"user_caption\">\n                {\" \"}\n                <strong>{val.user_id}</strong> {\" \"} {val.title}\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    );\n}\n\n  export default Trending;\n  "]},"metadata":{},"sourceType":"module"}